---
# Docker installation for Amazon Linux 2
# Uses shell to bypass yum/dnf backend detection issues

- name: Install Docker (Amazon Linux 2)
  shell: yum install -y docker
  when: ansible_distribution == "Amazon"

- name: Start and enable Docker service
  shell: |
    systemctl start docker
    systemctl enable docker
  when: ansible_distribution == "Amazon"

- name: Add ec2-user to docker group
  shell: usermod -aG docker ec2-user
  when: ansible_distribution == "Amazon"
